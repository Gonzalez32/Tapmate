<%- include('../partials/header') %> 
<%- include('../partials/nav') %>

<br><div class="container is-fullhd">
  <div class="notification is-warning">
    <h1 class="title is-1">User Profile</h1>

    <article class="media">
      <figure class="media-left">
        <p class="image is-64x64">
          <img class="is-rounded" id="avatarPhoto" width="30" src="<%= user.avatar %>" alt="">        
        </p>
      </figure>
      <div class="media-content">
        <div class="content">
          <p>
            <strong><%= user.name %></strong> <small><%= user.email %></small> <small>Alias: <%= user.alias %></small>
            <br>
            <h6 class="title is-6">Bio: <%= user.bio %></h6>
          </p>
        </div>
    </article><br>

    <form id="userForm" action="/users/profile?_method=PUT" method="POST">
      <div class="form-row">
        <div class="col-md-4">
          <label class="label" for="userAlias">Alias:</label>
          <input type="text" id="userAlias" placeholder="Enter text" class="input is-rounded" name="alias" value="<%= user.alias %>" required>
        </div>
      </div><br>
    <div class="form-row">
      <div class="col-md-12">
        <label class="label" for="avatarUrl">Avatar Image URL:</label>
        <input type="text" id="avatarUrl" class="input is-rounded" name="avatar" value="<%= user.avatar %>">
      </div>
    </div>
      <div class="form-row">
        <div class="col-md-12">
          <label class="label" for="bio">Bio:</label>
          <textarea rows="3" id="bio" class="textarea is-info" name="bio"><%= user.bio %></textarea>
        </div>
      </div><br>
      <button type="submit" class="button is-info is-outlined is-rounded">Update</button>
    </form><br>

    <div>
      <% user.friends.forEach((f) => { %>
        <a href="/users/<%= f._id %>"><img width="30" id="avatarPhoto" src="<%= f.avatar %>" alt=""><%= f.name %> <%= f.alias ? `(${f.alias})` : '' %></a><br><br>
      <% }) %>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>